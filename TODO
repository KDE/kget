TODO-list for KGet
======================

<nick>  == reported by
Legend:
    ADD - ADDed
    CHG - CHanGed
    FIX - FIXed


    IN PROGRESS
---------------------
  ADD <dario> make it possible to move transfers to a specific group using
      the popup menu.



        TODO
---------------------

SHORT-TERM (URGENT):

  -- MAINWINDOW --
  CHG <dario> rename the KMainWidget class (that IMHO is a rather confusing name)
      to MainWindow (KGet? KGetWindow?)

  -- SCHEDULER --
  FIX <pino> _rewrite_ & simplify the scheduler functions which schedule
      new downloads, atm they are too messy
  FIX <pino> _rewrite_ & simplify the scheduler functions which manage the
      downloads, atm they are too messy and don't work properly
  CHG <dario> optimize if possible the fact we must check if a transfer
      is still present in the transfers list (in the Scheduler class, function
      slotTransferChanged() ).

  -- SIDEBAR --
  ADD <dario> (JJ) once the ViewInterface has the necessary methods, make the 
      sidebar call them to select a group (calling schedSelGroup()).
  ADD <dario> add a "Finished" (is this the best name?) item. This will point
      to the downloaded files.
  ADD <dario> add a popupmenu to add or delete groups by right-clicking on them.

  -- MAINVIEW --
  FIX <dario> when resizing the columns of the mainview and the groupspanel
      the items are not updated correctly
  ADD <dario> make it possible to drag a transfer in a group inside the
      mainview or in the groups visible in the groupspanel.
  ADD <dario> once the ViewInterface has the necessary methods, implement 
      the selection of a specific group. In this way selecting a group from the
      sidebar should display only its transfers.
  ADD <dario> add a coloured band over the mainview displaying the currently
      display items. For example if I select "Downloads" from the sidebar it
      should display "Downloads". If instead I select a specific group <groupname>
      it should display "Downloads - <groupname>"

  -- VIEWINTERFACE --
  ADD <dario> (JJ) add new functions to the interface to select a list of transfers 
      or a group. Something like: schedSelItems(const TransferList &) and
      schedSelGroup(const Group &).
      We also need to add the related virtual functions:
      schedulerSelectedItems(const TransferList &) and
      schedulerSelectedGroup(const Group &)
      These new functions will be used, for example, from the sidebar to select
      a group, and the mainview will update accordingly to this.

  -- MISCELLANEOUS --
  ADD <dario> implement the GlobalStatus object and make the
      systray to update using the ViewInterface slots instead of the actual hack.
      To make this happen we need to create also a special group containing all
      the ungrouped Transfers. Then we just need to sum the progress of each group
      to know the global download percentage.
  FIX <dario> sometimes the group percentage stops at 99% instead of 100%.
      This is probably caused by the optimized incremental progress update that is
      performed inside the Group class, leading to approssimation errors.
  ADD <dario> implement progressive filling of the icon in the system tray
  CHG <dario> verify that the painting operations in the views are performed
      only when necessary.
  CHG <pino> verify that all the settings are respected
  ADD <pino> implement the grouping functionalities
  ADD <dario> in order to have all the necessary informations to calculate a
      global progress percentage, we need to know the size of each transfer
      in the list. This is currently not the case. Now we have this information
      only for the already started transfers. Maybe we should add a virtual 
      function to the transfer asking for its size and the scheduler should
      query all the transfers until he knows the size of each one.

MID-TERM:

  ADD <dario> change the actual way we use the priority for each transfer.
      In the future it will describe the precise order the transfers will be 
      downloaded.
  ADD <dario> use KPassivePopups to notify when all the transfers have been
      downloaded.
  CHG <dario> profile kget and look for possible optimizations.
  ADD <dario> add the possibility to select "open destination folder" in 
      the transfer's popup menu.
  ADD <kget> bitTorrent support
  CHG <kget> setup a decent gui with a decent toolbars.
  CHG <kget> sync the configuration options with what has currently been 
      implemented.
  ADD <dario> make it possible to associate a default folder to each group.
  ADD <pino> tooltips and what's this for settings
  ADD <pino> implement the notifications
  ADD <dario> add a wizard on the first app execution, where the user can set
      his download folders and other "vital" settings like the integration with
      Konqueror. Perhaps we could provide a good default like ~/downloads/.
  ADD <pino> make the sidebar capable of several sizes for its items (16, 22,
      32, ...)

LONG-TERM:

  ADD <kget> make the TestView able to make intensive tests on kget by
      giving commands to the Scheduler and looking if what happens is what should
      happen.
  CHG <dario> usability enhancements as in #79519
  ADD <dario> sidebar for transfer statistics and more (bandwidth
      graph, alternative urls, connection status/type, virtual folders,
      ...)
  ADD <kget> add bandwidth limiting
  ADD <kget> splits download in N segments
  ADD <kget> support for mirrors
  ADD <dario> 'low priority downloads' as in br #50776.
  ADD <kget> add Help & Guide


        DONE
---------------------


  Things done until 21/01/2005

  CHG <dario, eros> decoupling between gui and transfer operations.
  ADD <dario> Implement the MainView class that should become the kget main view.
  CHG <dario> Transfer object rewrite to make it easily inherited from 
      new kind of transfers.
  ADD <dario> TransferKio. The first transfer realized using kioSlaves
  CHG <dario> Scheduler logic enhancement (there are still lots of things to do)
  ADD <dario> groups support and notifies to the views.
  ADD <dario> systray icon with blinking overlay.
  CHG <eros> Move all the configuration framework to KConfigXT
  CHG <dario> implement delayedInitialization of the kget app. This should speed up
      the startup a lot with big lists of transfers.
  FIX <dario> the konqueror plugin doesn't allow the download of links if 
      the relative web page has been closed
  FIX <pino> make more fluid the drop target movement
  FIX <dario> handle SideBar resizing correctly
  CHG <dario> finish to implement transferKio adding, for example, setDelay.
  FIX <dario> (JJ) fix crash when resuming an already running transfer. The 
      solution should be to check for this case in Scheduler::slotSetCommand
      by calling the info() function on the transfer and checking if its status
      is St_Trying or St_Running. In this case we should do nothing.
  FIX <dario> (JJ) fixed Sidebar crash.
  FIX <dario> fixed 'stop on transfer' crash
  FIX <enrico> Optimized color scheme change (rebuilds pixmaps, droptarget,
      etc) and pixmap deletion (leakfix)
  CHG <enrico> disabled internal segv hander to show backtraces on crash

IDEAS:
   * Use the single transfer dialog to display transfer property, progress and
     to set up advanced options of a transfer, like its splitting into chuncks.


DISCUSSING:
   * Remember to move downloaded Transfers in a black-list that will be
     deleted when program exits. So old pointers to downloaded items are
     still valid when the transfer ends.

